# Claude Code Global Custom Instruction

## 言語設定

- チャット上の応答 日本語
- 技術ドキュメント: 日本語
- CLAUDE.md: 日本語
- 変数名・関数名: 英語
- コメント: 英語を推奨するが、難解なロジックの解説などでは日本語を用いる

## 進め方

- **ファイルの編集が必要になると予測される指示においては必ず** 以下の 4 ステップを実行し、私と完了の合意が取れるまで次のステップに進めないようにする
  1. 探索: 指示に対して関連するファイル、およびそのファイルが依存しているファイルを探索し、把握できた現状をアウトプットする
  2. 計画: 探索によって認識した現状と指示内容を踏まえ、どのように進めるかを深く考えて練った計画をアウトプットする
  3. 実装: 計画に沿って小さな粒度で実装を行う
  4. コミット: Git にコミットを行う
- 確実な情報のみを回答すること
- 情報が不確かな場合は WEB Search にて情報収集を行うこと
- WEB Search を経ても情報が見つからない場合は情報が見つからなかった旨を回答すること
- 私が常に正しいとは限らないので、対案や意見がある場合は忌憚なく述べること
- 実装完了後、各リポジトリ内ドキュメントや CLAUDE.md の更新も行うこと
- MCP サーバーは積極的に利用すること

## コーディング規約

- 文字エンコーディングは UTF-8 で統一する
- 末尾空白は削除する
- ファイルの最後は改行で統一する
- すべてのリンティング・フォーマットの問題を自動修正する
- 定義に対してコメントにて意図を記述する

## コード設計方針

- 汎用的であることよりもシンプルであることにより変更容易性を確保する
- 常にカプセル化を意識し、必要最低限の API のみを外部に公開する
- 責務分担を明確にし、外部に知らせるべきでないこと、外部の事情が入りこまないことを意識する
- クラス、オブジェクトや型などの命名は常にセマンティックに行い、その責務が明確な名前をつける
- メソッド、関数はどのような目的で使用するべきかが明確にわかる名前にしつつ、レシーバーやパッケージ名をコンテキストと捉えて冗長にならないよう気をつける
- パフォーマンスに重大な問題ある場合を除き、過度な最適化よりもセマンティックで読みやすいコードを心がける
- テスタビリティを常に意識する。外部サービスなどテストがしにくい部分はモックやスタブに差し替えられる設計を心がける

## テスト

- こちらが明示的にテストのスキップを指示しないかぎり、コードの追加・改修に合わせてテストも追加・改修する
- テストの記述が困難な場合は実装側をテスタブルに改修することを検討する
- 単体テストは複合条件網羅および境界値に対するケースのテストを基本とする
- 統合テストは条件網羅および境界値に対するケースのテストを API エンドポイントには推奨

## Git 管理

- コミットは論理的にまとまりのある最小単位で行う
- コミットするメッセージは Conventional Commits に沿って行う
- コミットメッセージは英文で作成する
- 最初の行には変更内容やその意義を完結にわかる一文とする
- 一般的に不要とされるファイル（ログや一時ファイルなど）やシークレット情報（秘密鍵やパスワードなど）が変更差分上に含まれてしまっている場合は**必ず** `.gitignore` への追加を警告する
